<!-- begin::Header -->
<div class="card mb-5">
  <div class="card-body d-flex flex-wrap justify-content-center p-0">
    <app-stats-widget5
      svgIcon="./assets/media/icons/duotune/general/gen025.svg"
      class="card bg-light-success my-5 mx-10 w-350px"
      iconColor="success"
      color="white"
      title="5000"
      description="ยังไม่มีการท้วงถาม"
    ></app-stats-widget5>

    <app-stats-widget5
      svgIcon="./assets/media/icons/duotune/ecommerce/ecm002.svg"
      class="card bg-light-warning my-5 mx-10 w-350px"
      iconColor="warning"
      color="white"
      title="2000"
      description="การท้วงถามมากกว่า 1 ครั้ง"
    ></app-stats-widget5>

    <app-stats-widget5
      svgIcon="./assets/media/icons/duotune/graphs/gra007.svg"
      class="card bg-light-danger my-5 mx-10 w-350px"
      iconColor="danger"
      color="white"
      title="7000"
      description="ยอดบิลค้างชำระ"
    ></app-stats-widget5>
  </div>
</div>

<div class="card-header border-0 pt-5">
  <div class="card-header border-0 pt-5">
    <div class="d-flex flex-wrap mb-3">
      <div class="me-10 mb-4">
        <p class="fs-3 mb-0 fw-bold">บิลค้างชำระ</p>
        <p class="fs-8 fw-bold text-gray-500">
          รายการลูกค้า {{ dataSource.filteredData.length }} รายชื่อ
        </p>
      </div>

      <mat-form-field appearance="outline">
        <input
          matInput
          (keyup)="applyFilter($event)"
          placeholder="ค้นหา"
          #input
        />
        <mat-icon matPrefix>search</mat-icon>
      </mat-form-field>
    </div>

    <table mat-table [dataSource]="dataSource" matSort>
      <ng-container matColumnDef="name_cus">
        <th mat-header-cell *matHeaderCellDef>ชื่อลูกค้า</th>
        <td mat-cell *matCellDef="let row">{{ row.cusnam }}</td>
      </ng-container>

      <ng-container matColumnDef="doc_id">
        <th mat-header-cell *matHeaderCellDef>เลขที่เอกสาร</th>
        <td mat-cell *matCellDef="let row">{{ row.docnum }}</td>
      </ng-container>

      <ng-container matColumnDef="doc_date">
        <th mat-header-cell *matHeaderCellDef>วันที่เอกสาร</th>
        <td mat-cell *matCellDef="let row">
          {{ row.docdat | date: "shortDate" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="name_sale">
        <th mat-header-cell *matHeaderCellDef>พนักงานขาย</th>
        <td mat-cell *matCellDef="let row">{{ row.slmdes }}</td>
      </ng-container>

      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef>ยอดค้างชำระ</th>
        <td mat-cell *matCellDef="let row">{{ row.balamt }}</td>
      </ng-container>

      <ng-container matColumnDef="status_cus">
        <th mat-header-cell *matHeaderCellDef>สถานะ</th>
        <td mat-cell *matCellDef="let row" class="fw-bolder text-danger">
          ค้างจ่าย
        </td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>การท้วงถาม</th>
        <td mat-cell *matCellDef="let row">
          <div
            title="Add bill"
            class="btn btn-active-light-primary p-1"
            (click)="add(row.docnum, row.cusnam)"
          >
            <span
              class="svg-icon svg-icon-2 svg-icon-primary"
              [inlineSVG]="'./assets/media/svg/icons/Communication/Write.svg'"
            ></span>
          </div>

          <div
            title="show detail"
            class="btn btn-active-light-primary p-1"
            (click)="details(row.docnum)"
          >
            <span
              class="svg-icon svg-icon-2 svg-icon-primary"
              [inlineSVG]="
                './assets/media/svg/icons/Navigation/Angle-right.svg'
              "
            ></span>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">
          No data matching the filter "{{ input.value }}"
        </td>
      </tr>
    </table>
    <mat-paginator
      [pageSize]="10"
      hidePageSize
      showFirstLastButtons
    ></mat-paginator>
  </div>
</div>
